<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MongoSwift  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="MongoSwift  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">MongoSwift Docs</a> (100% documented)</p>
        <p class="header-right"><a href="https://github.com/mongodb/mongo-swift-driver"><img src="img/gh.png"/>View on GitHub</a></p>
        <p class="header-right"><a href="dash-feed://https%3A%2F%2Fmongodb%2Egithub%2Eio%2Fdocsets%2FMongoSwift%2Exml"><img src="img/dash.png"/>Install in Dash</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">MongoSwift Reference</a>
        <img id="carat" src="img/carat.png" />
        MongoSwift  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="bson.html">BSON</a>
              </li>
              <li class="nav-group-task">
                <a href="change-streams.html">Change-Streams</a>
              </li>
              <li class="nav-group-task">
                <a href="development.html">Development</a>
              </li>
              <li class="nav-group-task">
                <a href="error-handling.html">Error-Handling</a>
              </li>
              <li class="nav-group-task">
                <a href="multithreaded-usage.html">Multithreaded-Usage</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/BSONDecoder.html">BSONDecoder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BSONDecoder/DateDecodingStrategy.html">– DateDecodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BSONDecoder/UUIDDecodingStrategy.html">– UUIDDecodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BSONDecoder/DataDecodingStrategy.html">– DataDecodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BSONEncoder.html">BSONEncoder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BSONEncoder/DateEncodingStrategy.html">– DateEncodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BSONEncoder/UUIDEncodingStrategy.html">– UUIDEncodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BSONEncoder/DataEncodingStrategy.html">– DataEncodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ChangeStream.html">ChangeStream</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ClientSession.html">ClientSession</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DocumentIterator.html">DocumentIterator</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:10MongoSwift15DocumentStorageC">DocumentStorage</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MongoClient.html">MongoClient</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MongoCursor.html">MongoCursor</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ReadPreference.html">ReadPreference</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ReadPreference/Mode.html">– Mode</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/BSON.html">BSON</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/BSONType.html">BSONType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/CollectionType.html">CollectionType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/CursorType.html">CursorType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/DataCodingStrategy.html">DataCodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/DateCodingStrategy.html">DateCodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/FullDocument.html">FullDocument</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/Hint.html">Hint</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/OperationType.html">OperationType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ReturnDocument.html">ReturnDocument</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/RuntimeError.html">RuntimeError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ServerError.html">ServerError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/UUIDCodingStrategy.html">UUIDCodingStrategy</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/UserError.html">UserError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/WriteModel.html">WriteModel</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Date.html">Date</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/NSRegularExpression.html">NSRegularExpression</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Notification.html">Notification</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Notification/Name.html">– Name</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/UUID.html">UUID</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/s:10MongoSwift07cleanupaB0yyF">cleanupMongoSwift()</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/CodingStrategyProvider.html">CodingStrategyProvider</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/MongoCommandEvent.html">MongoCommandEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols.html#/s:10MongoSwift0A5ErrorP">MongoError</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/MongoEvent.html">MongoEvent</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/AggregateOptions.html">AggregateOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/BSONCoderOptions.html">BSONCoderOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Binary.html">Binary</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Binary/Subtype.html">– Subtype</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/BulkWriteError.html">BulkWriteError</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/BulkWriteOptions.html">BulkWriteOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/BulkWriteResult.html">BulkWriteResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChangeStreamEvent.html">ChangeStreamEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChangeStreamOptions.html">ChangeStreamOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ClientOptions.html">ClientOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ClientSessionOptions.html">ClientSessionOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Code.html">Code</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CodeWithScope.html">CodeWithScope</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CollectionOptions.html">CollectionOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CollectionSpecification.html">CollectionSpecification</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CollectionSpecificationInfo.html">CollectionSpecificationInfo</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CommandFailedEvent.html">CommandFailedEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CommandStartedEvent.html">CommandStartedEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CommandSucceededEvent.html">CommandSucceededEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ConnectionId.html">ConnectionId</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CountDocumentsOptions.html">CountDocumentsOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CreateCollectionOptions.html">CreateCollectionOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CreateIndexOptions.html">CreateIndexOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DBPointer.html">DBPointer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DatabaseOptions.html">DatabaseOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DatabaseSpecification.html">DatabaseSpecification</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Decimal128.html">Decimal128</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DeleteModelOptions.html">DeleteModelOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DeleteOptions.html">DeleteOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DeleteResult.html">DeleteResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DistinctOptions.html">DistinctOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Document.html">Document</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DropCollectionOptions.html">DropCollectionOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DropDatabaseOptions.html">DropDatabaseOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DropIndexOptions.html">DropIndexOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/EstimatedDocumentCountOptions.html">EstimatedDocumentCountOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/FindOneAndDeleteOptions.html">FindOneAndDeleteOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/FindOneAndReplaceOptions.html">FindOneAndReplaceOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/FindOneAndUpdateOptions.html">FindOneAndUpdateOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/FindOptions.html">FindOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IndexModel.html">IndexModel</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IndexOptions.html">IndexOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/InsertManyResult.html">InsertManyResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/InsertOneOptions.html">InsertOneOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/InsertOneResult.html">InsertOneResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ListCollectionsOptions.html">ListCollectionsOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MongoCollection.html">MongoCollection</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MongoDatabase.html">MongoDatabase</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MongoNamespace.html">MongoNamespace</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ObjectId.html">ObjectId</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ReadConcern.html">ReadConcern</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ReadConcern/Level.html">– Level</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RegularExpression.html">RegularExpression</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ReplaceOneModelOptions.html">ReplaceOneModelOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ReplaceOptions.html">ReplaceOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ResumeToken.html">ResumeToken</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RunCommandOptions.html">RunCommandOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ServerClosedEvent.html">ServerClosedEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ServerDescription.html">ServerDescription</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ServerDescription/ServerType.html">– ServerType</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ServerDescriptionChangedEvent.html">ServerDescriptionChangedEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ServerHeartbeatFailedEvent.html">ServerHeartbeatFailedEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ServerHeartbeatStartedEvent.html">ServerHeartbeatStartedEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ServerHeartbeatSucceededEvent.html">ServerHeartbeatSucceededEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ServerOpeningEvent.html">ServerOpeningEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Symbol.html">Symbol</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TLSOptions.html">TLSOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Timestamp.html">Timestamp</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TopologyClosedEvent.html">TopologyClosedEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TopologyDescription.html">TopologyDescription</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TopologyDescription/TopologyType.html">– TopologyType</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TopologyDescriptionChangedEvent.html">TopologyDescriptionChangedEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TopologyOpeningEvent.html">TopologyOpeningEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/UpdateDescription.html">UpdateDescription</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/UpdateModelOptions.html">UpdateModelOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/UpdateOptions.html">UpdateOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/UpdateResult.html">UpdateResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/WriteConcern.html">WriteConcern</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/WriteConcern/W.html">– W</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/WriteConcernError.html">WriteConcernError</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/WriteError.html">WriteError</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10MongoSwift17InsertManyOptionsa">InsertManyOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:10MongoSwift15ServerErrorCodea">ServerErrorCode</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p><a href="https://travis-ci.org/mongodb/mongo-swift-driver"><img src="https://travis-ci.org/mongodb/mongo-swift-driver.svg?branch=master" alt="Build Status"></a>
<a href="https://codecov.io/gh/mongodb/mongo-swift-driver/branch/master"><img src="https://codecov.io/gh/mongodb/mongo-swift-driver/branch/master/graph/badge.svg" alt="Code Coverage"></a></p>
<h1 id='mongoswift' class='heading'>MongoSwift</h1>

<p>The official <a href="https://www.mongodb.com/">MongoDB</a> driver for Swift.</p>
<h3 id='index' class='heading'>Index</h3>

<ul>
<li><a href="#documentation">Documentation</a></li>
<li><a href="#bugs--feature-requests">Bugs/Feature Requests</a></li>
<li><a href="#installation">Installation</a>

<ul>
<li><a href="#step-1-install-the-mongodb-c-driver">Step 1: Install the MongoDB C Driver</a></li>
<li><a href="#step-2-install-mongoswift">Step 2: Install MongoSwift</a></li>
</ul></li>
<li><a href="#example-usage">Example Usage</a>

<ul>
<li><a href="#connect-to-mongodb-and-create-a-collection">Connect to MongoDB and Create a Collection</a></li>
<li><a href="#create-and-insert-a-document">Create and Insert a Document</a></li>
<li><a href="#find-documents">Find Documents</a></li>
<li><a href="#work-with-and-modify-documents">Work With and Modify Documents</a></li>
<li><a href="#usage-with-kitura-and-vapor">Usage With Kitura and Vapor</a></li>
</ul></li>
<li><a href="#development-instructions">Development Instructions</a></li>
</ul>
<h2 id='documentation' class='heading'>Documentation</h2>

<p>The latest documentation is available <a href="https://mongodb.github.io/mongo-swift-driver/">here</a>.</p>
<h2 id='bugs-feature-requests' class='heading'>Bugs / Feature Requests</h2>

<p>Think you&rsquo;ve found a bug? Want to see a new feature in <code>mongo-swift-driver</code>? Please open a case in our issue management tool, JIRA:</p>

<ol>
<li>Create an account and login: <a href="https://jira.mongodb.org">jira.mongodb.org</a></li>
<li>Navigate to the SWIFT project: <a href="https://jira.mongodb.org/browse/SWIFT">jira.mongodb.org/browse/SWIFT</a></li>
<li>Click <strong>Create Issue</strong> - Please provide as much information as possible about the issue and how to reproduce it.</li>
</ol>

<p>Bug reports in JIRA for all driver projects (i.e. NODE, PYTHON, CSHARP, JAVA) and the
Core Server (i.e. SERVER) project are <strong>public</strong>.</p>
<h2 id='installation' class='heading'>Installation</h2>

<p><code>MongoSwift</code> works with Swift 5.0+ on MacOS and Linux.</p>

<p>Installation is supported via <a href="https://swift.org/package-manager/">Swift Package Manager</a>.</p>
<h3 id='step-1-install-the-mongodb-c-driver' class='heading'>Step 1: Install the MongoDB C Driver</h3>

<p>The driver wraps the MongoDB C driver, and using it requires having the C driver&rsquo;s two components, <code>libbson</code> and <code>libmongoc</code>, installed on your system. <strong>The minimum required version of the C Driver is 1.15.1</strong>.</p>

<p><em>On a Mac</em>, you can install both components at once using <a href="https://brew.sh/">Homebrew</a>:
<code>brew install mongo-c-driver</code>.</p>

<p><em>On Linux</em>: please follow the <a href="http://mongoc.org/libmongoc/current/installing.html#building-on-unix">instructions</a> from <code>libmongoc</code>&lsquo;s documentation. Note that the versions provided by your package manager may be too old, in which case you can follow the instructions for building and installing from source.</p>

<p>See example installation from source on Ubuntu in <a href="https://github.com/mongodb/mongo-swift-driver/tree/master/Examples/Docker">Docker</a>.</p>
<h3 id='step-2-install-mongoswift' class='heading'>Step 2: Install MongoSwift</h3>

<p><em>Please follow the instructions in the previous section on installing the MongoDB C Driver before proceeding.</em></p>

<p>Add MongoSwift to your dependencies in <code>Package.swift</code>:</p>
<pre class="highlight swift"><code><span class="c1">// swift-tools-version:5.0</span>
<span class="kd">import</span> <span class="kt">PackageDescription</span>

<span class="k">let</span> <span class="nv">package</span> <span class="o">=</span> <span class="kt">Package</span><span class="p">(</span>
    <span class="nv">name</span><span class="p">:</span> <span class="s">"MyPackage"</span><span class="p">,</span>
    <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/mongodb/mongo-swift-driver.git"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"VERSION.STRING.HERE"</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="nv">targets</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="nf">target</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"MyPackage"</span><span class="p">,</span> <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span><span class="s">"MongoSwift"</span><span class="p">])</span>
    <span class="p">]</span>
<span class="p">)</span>
</code></pre>

<p>Then run <code>swift build</code> to download, compile, and link all your dependencies.</p>
<h2 id='example-usage' class='heading'>Example Usage</h2>

<p>Note: You should call <code><a href="Functions.html#/s:10MongoSwift07cleanupaB0yyF">cleanupMongoSwift()</a></code> exactly once at the end of your application to release all memory and other resources allocated by <code>libmongoc</code>.</p>
<h3 id='connect-to-mongodb-and-create-a-collection' class='heading'>Connect to MongoDB and Create a Collection</h3>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">MongoSwift</span>

<span class="k">let</span> <span class="nv">client</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">MongoClient</span><span class="p">(</span><span class="s">"mongodb://localhost:27017"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">db</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="nf">db</span><span class="p">(</span><span class="s">"myDB"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">collection</span> <span class="o">=</span> <span class="k">try</span> <span class="n">db</span><span class="o">.</span><span class="nf">createCollection</span><span class="p">(</span><span class="s">"myCollection"</span><span class="p">)</span>

<span class="c1">// free all resources</span>
<span class="nf">cleanupMongoSwift</span><span class="p">()</span>
</code></pre>

<p>Note: we have included the client <code>connectionString</code> parameter for clarity, but if connecting to the default <code>&quot;mongodb://localhost:27017&quot;</code>it may be omitted: <code>let client = try MongoClient()</code>.</p>
<h3 id='create-and-insert-a-document' class='heading'>Create and Insert a Document</h3>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">doc</span><span class="p">:</span> <span class="kt">Document</span> <span class="o">=</span> <span class="p">[</span><span class="s">"_id"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s">"a"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"b"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">"c"</span><span class="p">:</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="n">collection</span><span class="o">.</span><span class="nf">insertOne</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">result</span><span class="p">?</span><span class="o">.</span><span class="n">insertedId</span> <span class="p">??</span> <span class="s">""</span><span class="p">)</span> <span class="c1">// prints `.int64(100)`</span>
</code></pre>
<h3 id='find-documents' class='heading'>Find Documents</h3>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span><span class="p">:</span> <span class="kt">Document</span> <span class="o">=</span> <span class="p">[</span><span class="s">"a"</span><span class="p">:</span> <span class="mi">1</span><span class="p">]</span>
<span class="k">let</span> <span class="nv">documents</span> <span class="o">=</span> <span class="k">try</span> <span class="n">collection</span><span class="o">.</span><span class="nf">find</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
<span class="k">for</span> <span class="n">d</span> <span class="k">in</span> <span class="n">documents</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h3 id='work-with-and-modify-documents' class='heading'>Work With and Modify Documents</h3>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">doc</span><span class="p">:</span> <span class="kt">Document</span> <span class="o">=</span> <span class="p">[</span><span class="s">"a"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">"b"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">"c"</span><span class="p">:</span> <span class="mi">3</span><span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span> <span class="c1">// prints `{"a" : 1, "b" : 2, "c" : 3}`</span>
<span class="nf">print</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s">"a"</span><span class="p">]</span> <span class="p">??</span> <span class="s">""</span><span class="p">)</span> <span class="c1">// prints `.int64(1)`</span>

<span class="c1">// Set a new value</span>
<span class="n">doc</span><span class="p">[</span><span class="s">"d"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
<span class="nf">print</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span> <span class="c1">// prints `{"a" : 1, "b" : 2, "c" : 3, "d" : 4}`</span>

<span class="c1">// Using functional methods like map, filter:</span>
<span class="k">let</span> <span class="nv">evensDoc</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">filter</span> <span class="p">{</span> <span class="n">elem</span> <span class="k">in</span>
    <span class="k">guard</span> <span class="k">let</span> <span class="nv">value</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="nf">asInt</span><span class="p">()</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">value</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
<span class="p">}</span>
<span class="nf">print</span><span class="p">(</span><span class="n">evensDoc</span><span class="p">)</span> <span class="c1">// prints `{ "b" : 2, "d" : 4 }`</span>

<span class="k">let</span> <span class="nv">doubled</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">elem</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="k">in</span>
    <span class="k">guard</span> <span class="k">case</span> <span class="k">let</span> <span class="nv">value</span> <span class="o">=</span> <span class="o">.</span><span class="nf">int64</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kt">Int</span><span class="p">(</span><span class="n">value</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">}</span>
<span class="nf">print</span><span class="p">(</span><span class="n">doubled</span><span class="p">)</span> <span class="c1">// prints `[2, 4, 6, 8]`</span>
</code></pre>

<p>Note that <code><a href="Structs/Document.html">Document</a></code> conforms to <code>Collection</code>, so useful methods from
<a href="https://developer.apple.com/documentation/swift/sequence"><code>Sequence</code></a> and
<a href="https://developer.apple.com/documentation/swift/collection"><code>Collection</code></a> are
all available. However, runtime guarantees are not yet met for many of these
methods.</p>
<h3 id='usage-with-kitura-vapor-and-perfect' class='heading'>Usage With Kitura, Vapor, and Perfect</h3>

<p>The <code>Examples/</code> directory contains sample projects that use the driver with <a href="https://github.com/mongodb/mongo-swift-driver/tree/master/Examples/Kitura">Kitura</a>, <a href="https://github.com/mongodb/mongo-swift-driver/tree/master/Examples/Vapor">Vapor</a>, and <a href="https://github.com/mongodb/mongo-swift-driver/tree/master/Examples/Perfect">Perfect</a>.</p>
<h2 id='development-instructions' class='heading'>Development Instructions</h2>

<p>See our <a href="https://mongodb.github.io/mongo-swift-driver/development.html">development guide</a> for instructions for building and testing the driver.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2019 <a class="link" href="" target="_blank" rel="external">Matt Broadstone, Kaitlin Mahar, and Patrick Freed</a>. All rights reserved. (Last updated: 2019-12-18)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.0</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
